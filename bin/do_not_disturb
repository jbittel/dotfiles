#!/usr/bin/env bash
#
# Get notifcation status or toggle do-not-disturb
#

readonly MODE_NAME='do-not-disturb'

status() {
    makoctl mode | grep $MODE_NAME 2>&1 > /dev/null
    if [[ $? -eq 0 ]]; then
        echo ""
        echo "Notifications off"
    else
        echo ""
        echo "Notifications on"
    fi
}

toggle() {
    echo $(status)
    if [[ $(status) =~ "Notifications off" ]]; then
        makoctl mode -r $MODE_NAME 2>&1 > /dev/null
    else
        makoctl mode -a $MODE_NAME 2>&1 > /dev/null
    fi
}

case "$1" in
    status)
        status
        ;;
    toggle)
        toggle
        status
        ;;
    *)
        echo "Usage: $0 {status|toggle}"
        exit 1
esac

exit 0
